import{r as e,c as a,a as s,w as l,i as o,o as t,b as u,d as r,e as n,f as i,g as d,I as p,t as c,h as m,s as f,j as g,k as v,l as _,m as h,n as k}from"./index-xJ6XffpG.js";import{_ as w}from"./logo.C0cGNqUp.js";import{o as y,a as b}from"./uni-app.es.WGLDDGg_.js";import{l as j}from"./user.Cx3nd9dg.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./request.DmWrvmgp.js";const x=V({__name:"login",setup(V){const x=e({username:"",password:""}),I=e(!1),C=e(!1),T=e(""),U=()=>{I.value=!I.value},q=a((()=>!x.value.username||!x.value.password||C.value)),A=()=>{q.value?f({title:"è¯·å¡«å†™å®Œæ•´ä¿¡æ¯",icon:"none"}):(T.value="",C.value=!0,j(x.value.username,x.value.password).then((e=>{const{token:a,userId:s,username:l}=e.data;g(a),v({userId:s,username:l}),f({title:"ç™»å½•æˆåŠŸ",icon:"success",duration:1500}),setTimeout((()=>{_({url:"/pages/home/home",fail:e=>{console.error("è·³è½¬å¤±è´¥:",e),h({url:"/pages/home/home"})}})}),1500)})).catch((e=>{T.value=e.message||"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•",f({title:T.value,icon:"none"})})).finally((()=>{C.value=!1})))},F=()=>{k({url:"/pages/register/register",fail:e=>{console.error("navigateToå¤±è´¥:",e),h({url:"/pages/register/register"})}})};return y((()=>{console.log("ç™»å½•é¡µé¢åŠ è½½å®Œæˆ")})),b((()=>{console.log("ç™»å½•é¡µé¢æ˜¾ç¤º"),T.value="",C.value=!1})),(e,a)=>{const f=r,g=n,v=o,_=p,h=m;return t(),s(v,{class:"login-page"},{default:l((()=>[u(v,{class:"login-header"},{default:l((()=>[u(f,{class:"logo",src:w,mode:"aspectFit"}),u(g,{class:"app-title"},{default:l((()=>[i("ç§‘ç ”åŠ©æ‰‹")])),_:1}),u(g,{class:"app-subtitle"},{default:l((()=>[i("AIé©±åŠ¨çš„å­¦æœ¯ç ”ç©¶åŠ©æ‰‹")])),_:1})])),_:1}),u(v,{class:"login-form"},{default:l((()=>[u(v,{class:"input-item"},{default:l((()=>[u(g,{class:"input-label"},{default:l((()=>[i("ç”¨æˆ·å/é‚®ç®±")])),_:1}),u(_,{class:"input-field",type:"text",modelValue:x.value.username,"onUpdate:modelValue":a[0]||(a[0]=e=>x.value.username=e),placeholder:"è¯·è¾“å…¥ç”¨æˆ·åæˆ–é‚®ç®±"},null,8,["modelValue"])])),_:1}),u(v,{class:"input-item"},{default:l((()=>[u(g,{class:"input-label"},{default:l((()=>[i("å¯†ç ")])),_:1}),u(v,{class:"password-input-wrapper"},{default:l((()=>[u(_,{class:"input-field",type:I.value?"text":"password",modelValue:x.value.password,"onUpdate:modelValue":a[1]||(a[1]=e=>x.value.password=e),placeholder:"è¯·è¾“å…¥å¯†ç "},null,8,["type","modelValue"]),u(g,{class:"eye-icon",onClick:U},{default:l((()=>[i(c(I.value?"ðŸ‘ï¸":"ðŸ‘ï¸â€ðŸ—¨ï¸"),1)])),_:1})])),_:1})])),_:1}),T.value?(t(),s(v,{key:0,class:"error-message"},{default:l((()=>[i(c(T.value),1)])),_:1})):d("",!0),u(h,{class:"login-button",onClick:A,disabled:C.value},{default:l((()=>[C.value?(t(),s(v,{key:1,class:"loading-spinner"})):(t(),s(g,{key:0},{default:l((()=>[i("ç™»å½•")])),_:1}))])),_:1},8,["disabled"]),u(v,{class:"action-links"},{default:l((()=>[u(g,{class:"register-link",onClick:F},{default:l((()=>[i("æ³¨å†Œæ–°è´¦å·")])),_:1})])),_:1})])),_:1}),u(v,{class:"login-footer"},{default:l((()=>[u(g,{class:"copyright"},{default:l((()=>[i("Â© 2023 è®ºæ–‡åŠ©æ‰‹ - ç§‘ç ”å¥½å¸®æ‰‹")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-8bd43081"]]);export{x as default};
