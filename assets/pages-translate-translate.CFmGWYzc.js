import{a,w as t,n as e,J as s,K as n,s as i,L as l,M as o,D as c,E as r,m as u,i as d,p as g,o as h,b as p,q as m,u as T,g as f,N as v,O as L,h as y,e as x,f as C,t as _}from"./index-xJ6XffpG.js";import{C as k}from"./ChatLayout.CCL7FMtt.js";import{h as b}from"./request.DmWrvmgp.js";import{_ as S}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=S({components:{ChatLayout:k},data:()=>({functionItems:[{name:"首页",icon:"🏠"},{name:"论文分析助手",icon:"📊"},{name:"文本翻译助手",icon:"🌐",starred:!0},{name:"科研问答助手",icon:"🔍"}],activeFunctionIndex:2,sourceLanguage:"zh",targetLanguage:"en",translationStyle:"academic",translatedText:"",isTranslating:!1,translationComplete:!1,translationId:null,errorMessage:"",inputPlaceholder:"输入需要翻译的文本..."}),methods:{handleFunctionSelected(a){if(this.activeFunctionIndex=a,this.functionItems[a]){const t=this.functionItems[a].name;"首页"===t?e({url:"/pages/home/home"}):"论文分析助手"===t?e({url:"/pages/analysis/analysis"}):"科研问答助手"===t&&u({url:"/pages/qa/qa"})}},swapLanguages(){const a=this.sourceLanguage;this.sourceLanguage=this.targetLanguage,this.targetLanguage=a,this.translatedText&&(this.translatedText="",this.translationComplete=!1)},async handleTranslateText(a){if(a&&a.trim()&&!this.isTranslating){this.isTranslating=!0,this.errorMessage="",this.translationComplete=!1;try{c({title:"翻译中...",mask:!0});const t=await b.post("/translate",{text:a,sourceLanguage:this.sourceLanguage,targetLanguage:this.targetLanguage,style:this.translationStyle});r(),t.data&&(this.translatedText=t.data.translatedText,this.translationId=t.data.translationId,this.translationComplete=!0,this.saveTranslationHistory(a,this.translatedText))}catch(t){console.error("翻译请求失败:",t),this.errorMessage=t.message||"翻译失败，请稍后重试",r(),this.useLocalTranslation(a),i({title:"网络请求失败，使用本地翻译",icon:"none",duration:2e3})}finally{this.isTranslating=!1}}},useLocalTranslation(a){setTimeout((()=>{"zh"===this.sourceLanguage&&"en"===this.targetLanguage?this.translatedText="This is the translated text from Chinese to English. The translation maintains academic terminology and ensures accurate semantic conversion.":"en"===this.sourceLanguage&&"zh"===this.targetLanguage?this.translatedText="这是从英文翻译成中文的文本。翻译保留了学术术语并确保了准确的语义转换。":this.translatedText=a+" (翻译失败，当前只支持中英文互译)",this.translationComplete=!0}),800)},saveTranslationHistory(a,t){try{const e=l("translation_history")||[];e.unshift({id:this.translationId||Date.now(),sourceText:a,translatedText:t,sourceLanguage:this.sourceLanguage,targetLanguage:this.targetLanguage,style:this.translationStyle,timestamp:(new Date).toISOString()});const s=e.slice(0,50);o("translation_history",s)}catch(e){console.error("保存翻译历史失败:",e)}},saveToHistory(){if(!this.translatedText)return;const a=this.$refs.chatLayout.inputText;this.saveTranslationHistory(a,this.translatedText),i({title:"已保存到历史记录",icon:"success",duration:1500})},copyTranslatedText(){n({data:this.translatedText,success:()=>{i({title:"已复制到剪贴板",icon:"success"})}})},clearText(){this.$refs.chatLayout&&(this.$refs.chatLayout.inputText="")},pasteFromClipboard(){s({success:a=>{this.$refs.chatLayout&&a.data&&(this.$refs.chatLayout.inputText=a.data)}})},navigateToHistory(){e({url:"/pages/translate/history"})},handleSettingsClick(){e({url:"/pages/account/account"})},getLanguageName:a=>({zh:"中文",en:"英文"}[a]||a)}},[["render",function(e,s,n,i,l,o){const c=x,r=y,u=g("ChatLayout"),k=d;return h(),a(k,{class:"page-container"},{default:t((()=>[p(u,{ref:"chatLayout",appTitle:"科研助手",functionItems:l.functionItems,activeFunctionIndex:l.activeFunctionIndex,onFunctionSelected:o.handleFunctionSelected,onSendMessage:o.handleTranslateText,onSettingsClick:o.handleSettingsClick,inputPlaceholder:l.inputPlaceholder},{"header-actions":t((()=>[p(r,{class:"action-button",onClick:o.navigateToHistory,title:"翻译历史"},{default:t((()=>[p(c,{class:"action-icon"},{default:t((()=>[C("📋")])),_:1})])),_:1},8,["onClick"])])),"input-actions-left":t((()=>[p(r,{class:"action-button input-action-button",onClick:o.clearText,title:"清空文本"},{default:t((()=>[p(c,{class:"input-action-icon"},{default:t((()=>[C("🗑️")])),_:1})])),_:1},8,["onClick"]),p(r,{class:"action-button input-action-button",onClick:o.pasteFromClipboard,title:"从剪贴板粘贴"},{default:t((()=>[p(c,{class:"input-action-icon"},{default:t((()=>[C("📋")])),_:1})])),_:1},8,["onClick"])])),"input-actions-right":t((()=>[p(r,{class:"send-button",onClick:s[3]||(s[3]=a=>o.handleTranslateText(e.$refs.chatLayout.inputText)),disabled:l.isTranslating},{default:t((()=>[C(_(l.isTranslating?"翻译中...":"翻译"),1)])),_:1},8,["disabled"])])),default:t((()=>[m("div",{class:"translate-container"},[m("div",{class:"card main-card"},[m("div",{class:"card-title"},"学术文本翻译"),m("div",{class:"language-selector"},[m("div",{class:"language-group"},[m("div",{class:"language-label"},"源语言"),m("div",{class:"select-wrapper"},[v(m("select",{class:"language-select","onUpdate:modelValue":s[0]||(s[0]=a=>l.sourceLanguage=a)},[m("option",{value:"zh"},"中文"),m("option",{value:"en"},"英文")],512),[[L,l.sourceLanguage]])])]),p(r,{class:"swap-button",onClick:o.swapLanguages,title:"交换语言"},{default:t((()=>[p(c,{class:"swap-icon"},{default:t((()=>[C("🔄")])),_:1})])),_:1},8,["onClick"]),m("div",{class:"language-group"},[m("div",{class:"language-label"},"目标语言"),m("div",{class:"select-wrapper"},[v(m("select",{class:"language-select","onUpdate:modelValue":s[1]||(s[1]=a=>l.targetLanguage=a)},[m("option",{value:"zh"},"中文"),m("option",{value:"en"},"英文")],512),[[L,l.targetLanguage]])])]),m("div",{class:"style-selector"},[m("div",{class:"language-label"},"翻译风格"),m("div",{class:"select-wrapper"},[v(m("select",{class:"language-select","onUpdate:modelValue":s[2]||(s[2]=a=>l.translationStyle=a)},[m("option",{value:"academic"},"学术风格"),m("option",{value:"casual"},"日常风格")],512),[[L,l.translationStyle]])])])]),m("div",{class:"description"}," 我们的翻译系统专为科研工作者设计，可准确翻译中英文学术文献、论文摘要和专业术语，保留专业性和学术风格。 "),m("div",{class:"features"},[m("div",{class:"feature-tag"},"✓ 保留专业术语"),m("div",{class:"feature-tag"},"✓ 准确语义转换"),m("div",{class:"feature-tag"},"✓ 学术文体转换"),m("div",{class:"feature-tag"},"✓ 中英文互译")])]),l.translatedText?(h(),T("div",{key:0,class:"card result-card"},[m("div",{class:"card-title"},"翻译结果"),m("div",{class:"result-content"},_(l.translatedText),1),m("div",{class:"result-actions"},[p(r,{class:"action-btn",onClick:o.copyTranslatedText},{default:t((()=>[p(c,{class:"btn-icon"},{default:t((()=>[C("📋")])),_:1}),C(" 复制 ")])),_:1},8,["onClick"]),p(r,{class:"action-btn",onClick:o.saveToHistory},{default:t((()=>[p(c,{class:"btn-icon"},{default:t((()=>[C("💾")])),_:1}),C(" 保存 ")])),_:1},8,["onClick"])]),l.translationComplete?(h(),T("div",{key:0,class:"translation-info"},[m("div",{class:"info-item"},_(o.getLanguageName(l.sourceLanguage))+" → "+_(o.getLanguageName(l.targetLanguage)),1),m("div",{class:"info-item"},_("academic"===l.translationStyle?"学术风格":"日常风格"),1)])):f("",!0)])):f("",!0)])])),_:1},8,["functionItems","activeFunctionIndex","onFunctionSelected","onSendMessage","onSettingsClick","inputPlaceholder"])])),_:1})}],["__scopeId","data-v-d8bd9e07"]]);export{I as default};
