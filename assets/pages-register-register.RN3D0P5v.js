import{r as e,a,w as l,i as s,o as t,b as o,d as u,e as r,f as i,g as n,I as d,t as c,h as m,s as p,j as f,k as v,y as _,m as g}from"./index-xJ6XffpG.js";import{_ as y}from"./logo.C0cGNqUp.js";import{o as w}from"./uni-app.es.WGLDDGg_.js";import{r as h}from"./user.Cx3nd9dg.js";import{I as k}from"./IconImage.CFxWE55B.js";import{_ as V}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./request.DmWrvmgp.js";const b=V({__name:"register",setup(V){const b=e({username:"",email:"",password:"",confirmPassword:""}),j=e(!1),x=e(""),z=()=>{return b.value.username&&b.value.email&&b.value.password&&b.value.confirmPassword?(e=b.value.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?b.value.password!==b.value.confirmPassword?(x.value="两次密码输入不一致",void p({title:x.value,icon:"none"})):b.value.password.length<6?(x.value="密码长度不能少于6位",void p({title:x.value,icon:"none"})):(x.value="",j.value=!0,void h(b.value.username,b.value.email,b.value.password).then((e=>{const{userId:a,username:l}=e.data;f(e.data.token),v(e.data),p({title:"注册成功",icon:"success",duration:1500}),setTimeout((()=>{_()}),1500)})).catch((e=>{x.value=e.message||"注册失败，请重试",p({title:x.value,icon:"none"})})).finally((()=>{j.value=!1}))):(x.value="请输入有效的邮箱地址",void p({title:x.value,icon:"none"}))):(x.value="请填写完整信息",void p({title:x.value,icon:"none"}));var e},I=()=>{console.log("返回登录页面");try{_({delta:1,fail:()=>{g({url:"/pages/login/login",fail:e=>{console.error("返回登录页面失败:",e),p({title:"导航失败，请重试",icon:"none"})}})}})}catch(e){console.error("返回登录页面异常:",e)}};return w((()=>{console.log("注册页面加载完成")})),(e,p)=>{const f=u,v=r,_=s,g=d,w=m;return t(),a(_,{class:"register-page"},{default:l((()=>[o(_,{class:"register-header"},{default:l((()=>[o(f,{class:"logo",src:y,mode:"aspectFit"}),o(v,{class:"app-title"},{default:l((()=>[i("科研助手")])),_:1}),o(v,{class:"app-subtitle"},{default:l((()=>[i("创建您的账号")])),_:1})])),_:1}),o(_,{class:"register-form"},{default:l((()=>[o(_,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[i("用户名")])),_:1}),o(_,{class:"input-container"},{default:l((()=>[o(_,{class:"input-icon"},{default:l((()=>[o(k,{type:"person",size:20})])),_:1}),o(g,{class:"form-input",type:"text",modelValue:b.value.username,"onUpdate:modelValue":p[0]||(p[0]=e=>b.value.username=e),placeholder:"设置您的用户名 (3-20个字符)"},null,8,["modelValue"])])),_:1})])),_:1}),o(_,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[i("邮箱")])),_:1}),o(_,{class:"input-container"},{default:l((()=>[o(_,{class:"input-icon"},{default:l((()=>[o(k,{type:"email",size:20})])),_:1}),o(g,{class:"form-input",type:"text",modelValue:b.value.email,"onUpdate:modelValue":p[1]||(p[1]=e=>b.value.email=e),placeholder:"您的邮箱将用于账号验证"},null,8,["modelValue"])])),_:1})])),_:1}),o(_,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[i("密码")])),_:1}),o(_,{class:"input-container"},{default:l((()=>[o(_,{class:"input-icon"},{default:l((()=>[o(k,{type:"locked",size:20})])),_:1}),o(g,{class:"form-input",type:"password",modelValue:b.value.password,"onUpdate:modelValue":p[2]||(p[2]=e=>b.value.password=e),placeholder:"设置安全密码 (至少6位)"},null,8,["modelValue"])])),_:1})])),_:1}),o(_,{class:"form-item"},{default:l((()=>[o(v,{class:"form-label"},{default:l((()=>[i("确认密码")])),_:1}),o(_,{class:"input-container"},{default:l((()=>[o(_,{class:"input-icon"},{default:l((()=>[o(k,{type:"locked",size:20})])),_:1}),o(g,{class:"form-input",type:"password",modelValue:b.value.confirmPassword,"onUpdate:modelValue":p[3]||(p[3]=e=>b.value.confirmPassword=e),placeholder:"再次输入密码以确认"},null,8,["modelValue"])])),_:1})])),_:1}),x.value?(t(),a(v,{key:0,class:"error-message"},{default:l((()=>[i(c(x.value),1)])),_:1})):n("",!0),o(w,{class:"register-btn",onClick:z,disabled:j.value},{default:l((()=>[j.value?n("",!0):(t(),a(k,{key:0,type:"auth",size:18})),j.value?(t(),a(_,{key:2,class:"loading-spinner"})):(t(),a(v,{key:1},{default:l((()=>[i("注册账号")])),_:1}))])),_:1},8,["disabled"]),o(_,{class:"login-link"},{default:l((()=>[o(v,null,{default:l((()=>[i("已有账号？")])),_:1}),o(w,{class:"link-text",onClick:I},{default:l((()=>[o(k,{type:"back",size:14}),i(" 返回登录 ")])),_:1})])),_:1})])),_:1}),o(_,{class:"register-footer"},{default:l((()=>[o(v,{class:"copyright"},{default:l((()=>[i("© 2023 论文助手 - 科研好帮手")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-297867a8"]]);export{b as default};
